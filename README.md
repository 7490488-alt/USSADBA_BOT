# 🏡 Telegram-бот «Усадьба» с ИИ на Yandex LLM

AI-помощник для проекта «Усадьба» — отвечает на вопросы, отправляет документы, помнит историю диалога и работает через Yandex LLM.

---

## 🚀 Функционал

- ✅ Ответы от ИИ через **Yandex LLM** (`yandexgpt-lite`)
- ✅ Хранение истории диалогов (по чатам)
- ✅ Кэширование ответов для экономии токенов и скорости
- ✅ Отправка документов по запросу
- ✅ Защита от спама (ограничение 2 сек на запрос)
- ✅ Асинхронная архитектура (высокая производительность)
- ✅ Модульная структура (легко масштабировать)

---

## 🧰 Технологии

- `python-telegram-bot` v20+ — для работы с Telegram
- `Yandex LLM` — через совместимый с OpenAI API
- `pydantic-settings` — для загрузки `.env`
- `httpx` — асинхронные HTTP-запросы
- `pydantic` — валидация и настройки
- Структура: `main.py` → `bot/` → `services/` → `utils/`

---

## 📦 Установка

### 1. Клонируй репозиторий
```bash
git clone https://github.com/ваш-репозиторий/ussadba_bot.git
cd ussadba_bot

pip install -r requirements.txt

BOT_TOKEN=8293618472:AAEUT...
YA_API_KEY=AQVNzsBBP...
YA_FOLDER_ID=your-folder-id

ussadba_bot/
├── main.py                     # Точка входа
├── .env                        # Переменные окружения
├── config.py                   # Настройки через Pydantic
├── requirements.txt            # Зависимости
│
├── bot/
│   ├── application.py          # Обработчики команд
│   └── handlers/
│       ├── chat.py             # Основной диалог
│       ├── docs.py             # Документы
│       └── start.py            # Приветствие
│
├── services/
│   ├── llm.py                  # Yandex LLM
│   ├── cache.py                # Кэширование
│   └── history.py              # История диалогов
│
├── data/
│   ├── documents/              # PDF, XLSX и др.
│   ├── history/                # История чатов (JSON)
│   └── logs/                   # Логи по датам
│
├── prompts/
│   └── prompt_1.txt            # Системный промпт
│
└── utils/
    ├── logger.py               # Настройка логирования
    └── helpers.py              # Вспомогательные функции

    🧪 Запуск бота
Запусти из обычного терминала (не из Jupyter/REPL):
    python main.py

🛠 Настройка
1. Промпт
Отредактируй:
    prompts/prompt_1.txt

    Пример:
    Ты — AI-помощник проекта «Усадьба». Отвечай кратко, вежливо и по делу.

2. Документы
Положи файлы в:
    data/documents/
    И добавь в DOCUMENTS_MAP в docs.py:

    DOCUMENTS_MAP = {
    "презентация": "Презентация.pdf",
    "бизнес-план": "Бизнес-план.pdf",
    # ...
}

🐞 Логирование
    Логи пишутся в:
    data/logs/bot_2025-08-29.log
    Пример:
    2025-08-29 13:42:05,051 - utils.logger - INFO - ✅ Промпт загружен
    2025-08-29 13:42:07,737 - utils.logger - INFO - 🚀 Бот запущен. Ожидание сообщений...

📦 Дальнейшее развитие
Добавить кнопки и меню
Поддержка больших файлов (через облако)
Аналитика: статистика запросов
Docker-образ
Web интерфейс для менеджеров
📄 Лицензия
MIT


---

## ✅ Что даёт этот `README.md`

- 🧑‍💻 Помогает другим разработчикам быстро включиться
- 📦 Упрощает деплой и передачу проекта
- 📚 Документирует архитектуру и настройки
- 🔐 Напоминает о безопасности (не публиковать ключи)

---

Можно также:
- 📦 **"Создать ZIP"** — весь проект с `README.md`
- 🐳 **"Docker"** — добавить `Dockerfile`
- 📄 **"Добавь лицензию"** — MIT или другую



